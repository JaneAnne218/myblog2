import{_ as s,o as n,c as a,O as o}from"./chunks/framework.269db9bd.js";const C=JSON.parse('{"title":"1 npm init","description":"","frontmatter":{},"headers":[],"relativePath":"从0到1实现ci cd.md","filePath":"从0到1实现ci cd.md"}'),p={name:"从0到1实现ci cd.md"},l=o(`<h1 id="_1-npm-init" tabindex="-1">1 npm init <a class="header-anchor" href="#_1-npm-init" aria-label="Permalink to &quot;1 npm init&quot;">​</a></h1><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">jane-deploy</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.0.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">CI/CD server</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">main</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">index.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">test</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">echo </span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#C3E88D;">Error: no test specified</span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#C3E88D;"> &amp;&amp; exit 1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">keywords</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ci</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cd</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">deploy</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">author</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">zuoxiaobai</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">license</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">MIT</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>没有写git+respository</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">repository</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">git</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">url</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">git+https://github.com/zuoxiaobai/js-deploy.git</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span></code></pre></div><h1 id="_2-eslint-init" tabindex="-1">2. eslint init <a class="header-anchor" href="#_2-eslint-init" aria-label="Permalink to &quot;2.  eslint init&quot;">​</a></h1><p>2.1，安装 npm install eslint@7.32.0 --save-dev 2.2 npx eslint --init 按照只是一步步操作 ![[1-eslint-init.png]] 选择了第二个，并且推荐我安装了： eslint-plugin-vue@latest 2.3 npm install --save-dev --save-exact prettier 2.4 npm install eslint-config-prettier --save-dev 处理eslint 与prettier的冲突 2.5 npm install eslint-plugin-prettier --save-dev 将 prettier 以插件形式集成到 eslint 处理流程中 配置 <a href="https://github.com/prettier/eslint-plugin-prettier" target="_blank" rel="noreferrer">eslint-plugin-prettier</a>，实际我参考的是zuo-deploy的文件。</p><h1 id="koa-koa-router-koa-static" tabindex="-1">koa koa-router koa-static <a class="header-anchor" href="#koa-koa-router-koa-static" aria-label="Permalink to &quot;koa koa-router koa-static&quot;">​</a></h1><p>完成接口、静态服务 postman可以访问 <a href="http://127.0.0.1:7777/user" target="_blank" rel="noreferrer">http://127.0.0.1:7777/user</a> 浏览器可以访问 <a href="http://127.0.0.1:7777/" target="_blank" rel="noreferrer">http://127.0.0.1:7777/</a> 得到index.html页面</p><h1 id="上传npm包" tabindex="-1">上传npm包 <a class="header-anchor" href="#上传npm包" aria-label="Permalink to &quot;上传npm包&quot;">​</a></h1><p>本地调试： npm exec npm link janedeploy start 就成功了。 上传npm包：</p><ol><li>先切换到npm原镜像 npm config set registry <a href="https://registry.npmjs.org/" target="_blank" rel="noreferrer">https://registry.npmjs.org/</a></li><li>npm adduser; npm login; npm publish</li><li>切回到淘宝镜像 npm config set registry <a href="https://registry.npm.taobao.org" target="_blank" rel="noreferrer">https://registry.npm.taobao.org</a></li></ol><p>全局安装npm包 npm i -g jane-deploy</p><p>杀死进程 杀不掉-守护进程</p><p>0在virtual box上全局安装了 jane-deploy，sudo install -g jane-deploy 1 查看bin目录下是否有 janedeploy 2 建议重启终端 sudo reboot 3 查找wsl下的bin，也没有janedeploy，但是却可以启动成功janedeploy 4 查找janedeploy命令 和zuodeploy 在wsl下janedeploy、zuodeploy /mnt/c/Users/haobing/AppData/Roaming/npm/janedeploy /bin/zuodeploy 在virtualbox的ubuntu下 janedeploy、zuodeploy 找不到 /bin/zuodeploy 5 在win下 janedeploy zuodeploy <code>C:\\Users\\haobing\\AppData\\Roaming\\npm</code> 这里因为\\ 有转义作用，解决方法 1 C:\\Users\\haobing\\AppData\\Roaming\\npm<br> 2 用两个反引号<code>包围</code></p><p>readerme 换行失效，需要两个空格再换行 如何在GitHub的readme中加图片</p><ol><li><code>![图片描述](./image.png)</code></li><li><code>![图片描述](https://example.com/image.png)</code></li><li></li></ol><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">img</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./image.png</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">alt</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">图片描述</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">width</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">300</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span></code></pre></div><h1 id="在wsl-ubuntu-安装nginx" tabindex="-1">在wsl-ubuntu 安装nginx <a class="header-anchor" href="#在wsl-ubuntu-安装nginx" aria-label="Permalink to &quot;在wsl-ubuntu 安装nginx&quot;">​</a></h1><p>sudo apt install nginx</p><p>查看当前运行的程序 ps aux ps -aux | grep &lt;程序名称&gt;</p><p>localhost:7777即可访问 <a href="http://172.28.9.198:7777" target="_blank" rel="noreferrer">http://172.28.9.198:7777</a> 访问 <a href="http://172.28.9.198/" target="_blank" rel="noreferrer">http://172.28.9.198/</a> 访问nginx npm list -g 删除 rm /usr/bin/janedeploy sudo npm link 提示错误：npm ERR! path /usr/bin/package.json 解决在bin目录下没有janedeploy的方法： program .commond() 多加一个program</p>`,21),e=[l];function t(r,c,D,i,y,F){return n(),a("div",null,e)}const d=s(p,[["render",t]]);export{C as __pageData,d as default};
